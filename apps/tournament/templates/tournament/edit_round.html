{% extends "tournament/owner_base.html" %}

{% load staticfiles %}
{% load profile_extras %}

{% block extra_head %}
    {{ block.super }}
    <script type="text/javascript" src="{% static "tournament/js/swap_block.js" %}"></script>
{% endblock extra_head %}


{% block page_title %}
    Редактировать раунд
{% endblock page_title %}


{% block content %}
    <form class="b-result" action="{% url "tournament:edit_round" tournament.id %} " method="post">

        {% if warning %}
            <div class="my_warning">
            Для некоторых румов уже внесены результаты. При их редактировании незультаты рума будут удалены.
            </div>
        {% endif %}

        {% csrf_token %}

        {% for form in forms %}
            {{ form.non_field_errors }}
            {{ form.errors }}
        <div class="b-result-room">

            <div class="b-result-room__heading chair">
                {{ form.chair.errors }}
                {{ form.chair }}
                <h3 class="b-result-room__chair">
                    Судья
                    <select class="chair_select">
                        {% for adjudicator in adjudicators %}
                            <option value="{{ adjudicator.user.id }}" {% if adjudicator.user.id ==  form.chair.value%} selected {% endif %} >
                                {{ adjudicator.user|name }}
                            </option>
                        {% endfor %}
                    </select>
                </h3>
                <div class="place b-result-room__place">
                {{ form.place_id.errors }}
                {{ form.place_id }}
                <h3 class="">Аудитория</h3>
                <select class="place_select">
                    {% for place in places %}
                        <option value="{{ place.id }}" {% if place.id ==  form.place_id.value %} selected {% endif %} >
                            {{ place.place }}
                        </option>
                    {% endfor %}
                </select>
                </div>
            </div>

            <div class="b-result-room__games">
                <div class="b-result-room__og team">
                    {{ form.og }}
                    <p>1П: <span class="team_name">{{ form.game.og.name }}</span></p>
                </div>
                <div class="b-result-room__oo team">
                    {{ form.oo }}
                    <p>1O: <span class="team_name">{{ form.game.oo.name }}</span></p>
                </div>
                <div class="b-result-room__cg team">
                    {{ form.cg }}
                   <p>2П: <span class="team_name">{{ form.game.cg.name }}</span></p>
                </div>
                <div class="b-result-room__co team">
                    {{ form.co }}
                    <p>2O: <span class="team_name">{{ form.game.co.name }}</span></p>
                </div>
            </div>

        </div>
        {% endfor %}
        <div class="b-result-submit">
            <button type="submit" class="button">Далее</button>
        </div>
    </form>
{% endblock content %}
